/* 
* Lazy Line Painter 1.1
* SVG Stroke animation.
*
* https://github.com/camoconnell/lazy-line-painter
*
* Copyright 2013 
* Cam O'Connell - http://www.camoconnell.com  http://www.behance.net/camoconnell 
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*  
*/ 
(function(c,r,k){var e={init:function(b){return this.each(function(){var a=c(this);if(!a.data("lazyLinePainter")){var d=c.extend({strokeWidth:2,strokeColor:"#fff",strokeCap:"round",strokeJoin:"round",onComplete:null,delay:null},b),f=a.attr("id").replace("#",""),l=d.svgData[f].dimensions.width,h=d.svgData[f].dimensions.height;d.svgData=d.svgData[f].strokepath;a=new Raphael(a.attr("id"),l,h);c(this).data("lazyLinePainter",{settings:d,paper:a,count:1,complete:!1,playhead:0,setTimeOutHandler:[]})}})},
paint:function(){return this.each(function(){var b=c(this),a=b.data("lazyLinePainter"),d=function(){c.each(a.settings.svgData,function(c,d){var h=a.paper.path(d.path);h.attr({stroke:"none","stroke-width":a.settings.strokeWidth,"fill-opacity":0});var e=setTimeout(function(){var c=a.paper,e=d.duration,f={stroke:a.settings.strokeColor,"fill-opacity":0,"stroke-width":a.settings.strokeWidth,"stroke-linecap":a.settings.strokeCap,"stroke-linejoin":a.settings.strokeJoin},j=function(){a.setTimeOutHandler.splice(a.count,
1);a.count++;a.settings.svgData.length==a.count&&(a.complete=!0,null!=a.settings.onComplete&&a.settings.onComplete.call(b))},g;g="string"==typeof h?c.path(h).attr({stroke:"none",fill:"none"}):h;var m=c.path(g.getSubpath(0,1)).attr(f),n=g.getTotalLength(g);g.getPointAtLength(0);var p=(new Date).getTime(),q=setInterval(function(){var a=(new Date).getTime()-p,b=g.getSubpath(0,a/e*n);f.path=b;m.animate(f,25);a>=e&&(clearInterval(q),j!=k&&j(),g.remove())},25)},a.playhead);a.playhead+=d.duration;a.setTimeOutHandler.push(e)})};
a.settings.delay?setTimeout(d,a.settings.delay):d()})},erase:function(){return this.each(function(){var b=c(this);b.find("svg").empty();data=b.data("lazyLinePainter");c.each(data.setTimeOutHandler,function(){clearTimeout(this)});data.playhead=0;data.count=0;data.complete=!1})},destroy:function(){return this.each(function(){var b=c(this);b.data("lazyLinePainter");b.removeData("lazyLinePainter");b.remove()})}};c.fn.lazylinepainter=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,
1));if("object"===typeof b||!b)return e.init.apply(this,arguments)}})(jQuery,window);