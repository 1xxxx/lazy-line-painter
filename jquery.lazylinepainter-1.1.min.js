/* 
* Lazy Line Painter 1.1
* SVG Stroke animation.
*
* https://github.com/camoconnell/lazy-line-painter
*
* Copyright 2013 
* Cam O'Connell - http://www.camoconnell.com  http://www.behance.net/camoconnell 
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*  
*/ 
(function(b,q,k){var d={init:function(a){return this.each(function(){var c=b(this);if(!c.data("lazyLinePainter")){var e=b.extend({strokeWidth:2,strokeColor:"#fff",strokeCap:"round",strokeJoin:"round",onComplete:null,delay:null},a),h=c.attr("id").replace("#",""),g=e.svgData[h].dimensions.width,d=e.svgData[h].dimensions.height;e.svgData=e.svgData[h].strokepath;c=new Raphael(c.attr("id"),g,d);b(this).data("lazyLinePainter",{settings:e,paper:c,count:1,complete:!1,playhead:0,setTimeOutHandler:[]})}})},
paint:function(){return this.each(function(){var a=b(this).data("lazyLinePainter"),c=function(){b.each(a.settings.svgData,function(b,c){var g=a.paper.path(c.path);g.attr({stroke:"none","stroke-width":a.settings.strokeWidth,"fill-opacity":0});var d=setTimeout(function(){var b=a.paper,d=c.duration,e={stroke:a.settings.strokeColor,"fill-opacity":0,"stroke-width":a.settings.strokeWidth,"stroke-linecap":a.settings.strokeCap,"stroke-linejoin":a.settings.strokeJoin},j=function(){a.setTimeOutHandler.splice(a.count,
1);a.count++;if(a.settings.svgData.length==a.count&&(a.complete=!0,null!=a.settings.onComplete))a.settings.onComplete()},f;f="string"==typeof g?b.path(g).attr({stroke:"none",fill:"none"}):g;var l=b.path(f.getSubpath(0,1)).attr(e),m=f.getTotalLength(f);f.getPointAtLength(0);var n=(new Date).getTime(),p=setInterval(function(){var a=(new Date).getTime()-n,b=f.getSubpath(0,a/d*m);e.path=b;l.animate(e,25);a>=d&&(clearInterval(p),j!=k&&j(),f.remove())},25)},a.playhead);a.playhead+=c.duration;a.setTimeOutHandler.push(d)})};
a.settings.delay?setTimeout(c,a.settings.delay):c()})},erase:function(){return this.each(function(){var a=b(this);a.find("svg").empty();data=a.data("lazyLinePainter");b.each(data.setTimeOutHandler,function(){clearTimeout(this)});data.playhead=0;data.count=0;data.complete=!1})},destroy:function(){return this.each(function(){var a=b(this);a.data("lazyLinePainter");a.removeData("lazyLinePainter");a.remove()})}};b.fn.lazylinepainter=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"===typeof a||!a)return d.init.apply(this,arguments)}})(jQuery,window);