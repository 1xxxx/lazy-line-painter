/*
 * Lazy Line Painter
 * SVG Stroke animation.
 *
 * https://github.com/camoconnell/lazy-line-painter
 * http://www.camoconnell.com
 *
 * Licensed under the MIT license.
 *
 */
!function(t){"use strict";var e="lazyLinePainter",a={init:function(a){return this.each(function(){var r=t(this),n=r.data(e);if(r.addClass("lazy-line"),!n){var o=t.extend({width:null,height:null,strokeWidth:2,strokeColor:"#000",strokeOverColor:null,strokeCap:"round",strokeJoin:"round",strokeOpacity:1,arrowEnd:"none",onComplete:null,onStart:null,onStrokeStart:null,onStrokeComplete:null,delay:null,overrideKey:null,drawSequential:!0,speedMultiplier:1,reverse:!1,responsive:!1},a),s=o.overrideKey?o.overrideKey:r.attr("id").replace("#",""),l=o.svgData[s].dimensions.width,p=o.svgData[s].dimensions.height;o.svgData=o.svgData[s].strokepath,null===o.width&&(o.width=l),null===o.height&&(o.height=p),o.responsive||r.css({width:o.width,height:o.height});var h=i("0 0 "+l+" "+p);o.svg=t(h),r.append(o.svg),r.data(e,o)}})},paint:function(){return this.each(function(){var a=t(this),r=a.data(e),s=function(){r.paths=[],r.longestDuration=0,r.playhead=0;var t=0,e=0,a=0;for(e=0;e<r.svgData.length;e++)t=r.svgData[e].duration*r.speedMultiplier,a+=t;for(e=0;e<r.svgData.length;e++){var s=o(r,e),i=s.getTotalLength();s.style.strokeDasharray=i+" "+i,s.style.strokeDashoffset=i,s.style.display="block",s.getBoundingClientRect(),t=r.svgData[e].duration*r.speedMultiplier,t>r.longestDuration&&(r.longestDuration=t);var l;r.reverse?(a-=t,l=a):l=r.playhead,r.paths.push({duration:t,drawStartTime:l,path:s,length:i,onStrokeStart:r.svgData[e].onStrokeStart||null,onStrokeComplete:r.svgData[e].onStrokeComplete||null}),r.playhead+=t}r.totalDuration=r.drawSequential?r.playhead:r.longestDuration,r.rAF=requestAnimationFrame(function(t){n(t,r)}),null!==r.onStart&&r.onStart()};null===r.delay?s():setTimeout(s,r.delay)})},pauseResume:function(){return this.each(function(){var a=t(this).data(e);a.paused?(a.paused=!1,requestAnimationFrame(function(t){r(t,a)})):(a.paused=!0,cancelAnimationFrame(a.rAF))})},erase:function(){return this.each(function(){var a=t(this),r=a.data(e);r.startTime=null,r.elapsedTime=null,cancelAnimationFrame(r.rAF),r.svg.empty()})},destroy:function(){return this.each(function(){var a=t(this);a.removeData(e),a.remove()})}},r=function(t,e){e.startTime=t-e.elapsedTime,requestAnimationFrame(function(t){n(t,e)})},n=function(t,e){e.startTime||(e.startTime=t),e.elapsedTime=t-e.startTime;for(var a=0;a<e.paths.length;a++){var r;if(e.drawSequential?(r=e.elapsedTime-e.paths[a].drawStartTime,0>r&&(r=0)):r=e.elapsedTime,r<e.paths[a].duration&&r>0){var o=r/e.paths[a].duration*e.paths[a].length,s=e.paths[a].path.style.strokeDashoffset.replace("px","");Math.abs(s-e.paths[a].length)<=1e-6&&(null!==e.onStrokeStart&&e.drawSequential&&e.onStrokeStart(e.paths[a]),null!==e.paths[a].onStrokeStart&&e.drawSequential&&e.paths[a].onStrokeStart()),e.paths[a].path.style.strokeDashoffset=e.reverse||e.svgData[a].reverse?-e.paths[a].length+o:e.paths[a].length-o}else r>e.paths[a].duration&&((a==e.paths.length-1||"0px"!==e.paths[a].path.style.strokeDashoffset&&"0px"!==e.paths[a+1].path.style.strokeDashoffset)&&(null!==e.onStrokeComplete&&e.drawSequential&&e.onStrokeComplete(e.paths[a]),null!==e.paths[a].onStrokeComplete&&e.drawSequential&&e.paths[a].onStrokeComplete()),e.paths[a].path.style.strokeDashoffset=0)}e.elapsedTime<e.totalDuration?e.rAF=requestAnimationFrame(function(t){n(t,e)}):null!==e.onComplete&&e.onComplete()},o=function(e,a){var r=document.createElementNS("http://www.w3.org/2000/svg","path"),n=t(r);return e.svg.append(n),n.attr(s(e,e.svgData[a])),r},s=function(t,e){return{d:e.path,stroke:e.strokeColor?e.strokeColor:t.strokeColor,"fill-opacity":0,"stroke-opacity":e.strokeOpacity?e.strokeOpacity:t.strokeOpacity,"stroke-width":e.strokeWidth?e.strokeWidth:t.strokeWidth,"stroke-linecap":e.strokeCap?e.strokeCap:t.strokeCap,"stroke-linejoin":e.strokeJoin?e.strokeJoin:t.strokeJoin}},i=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttributeNS(null,"viewBox",t),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e};t.fn.lazylinepainter=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void console.log("opps - issue finding method"):a.init.apply(this,arguments)}}(jQuery);