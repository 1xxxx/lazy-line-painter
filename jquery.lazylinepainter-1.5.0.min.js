!function(a){var e=a(this),f="lazyLinePainter";e.methods={init:function(b){return this.each(function(){var c=a(this),d=c.data(f);if(c.addClass("lazy-line"),!d){var e=a.extend({width:null,height:null,strokeWidth:2,strokeColor:"#000",strokeCap:"round",strokeJoin:"round",strokeOpacity:1,strokeDash:null,onComplete:null,delay:null,overrideKey:null,drawSequential:!0,speedMultiplier:1,useRandomColors:!1},b),g=null===e.overrideKey?c.attr("id").replace("#",""):e.overrideKey,h=e.svgData[g].dimensions.width,i=e.svgData[g].dimensions.height;e.svgData=e.svgData[g].strokepath,null===e.width&&(e.width=h),null===e.height&&(e.height=i);var j=c.attr("id");e.paper=new Raphael(j,h,i),c.data(f,e)}})},paint:function(){return this.each(function(){var b=a(this),c=b.data(f);b.init=function(){b.css({width:c.width,height:c.height}),c.paths=[],c.longestDuration=0,c.playhead=0,a.each(c.svgData,function(a,d){var e=d.duration*c.speedMultiplier;e>c.longestDuration&&(c.longestDuration=e);var f=c.paper.path(d.path);c.useRandomColors&&(c.strokeColor=k()),f.attr({stroke:"none","fill-opacity":0}),c.paths.push({pathstr:f,duration:e,attr:b.applyStyles(d),drawStartTime:c.playhead}),c.playhead+=e}),c.totalDuration=c.drawSequential?c.playhead:c.longestDuration,c.rAF=requestAnimationFrame(function(a){h(a,c)})},b.applyStyles=function(a){var b={stroke:a.strokeColor?a.strokeColor:c.strokeColor,"fill-opacity":0,"stroke-dasharray":a.strokeDash?a.strokeDash:c.strokeDash,"stroke-opacity":a.strokeOpacity?a.strokeOpacity:c.strokeOpacity,"stroke-width":a.strokeWidth?a.strokeWidth:c.strokeWidth,"stroke-linecap":a.strokeCap?a.strokeCap:c.strokeCap,"stroke-linejoin":a.strokeJoin?a.strokeJoin:c.strokeJoin};return b},null===c.delay?b.init():setTimeout(b.init,c.delay)})},pauseResume:function(){return this.each(function(){var b=a(this).data(f);b.paused?(b.paused=!1,requestAnimationFrame(function(a){g(a,b)})):(b.paused=!0,cancelAnimationFrame(b.rAF))})},erase:function(){return this.each(function(){var b=a(this);b.find("svg").empty(),d=b.data(f),d.playhead=0,d.count=0,d.complete=!1})},destroy:function(){return this.each(function(){var b=a(this);b.data(f),b.removeData(f),b.remove()})},stamp:function(){return this.each(function(){var b=a(this),c=b.data(f),d=function(){for(b.css({width:c.width,height:c.height}),i=0;i<c.svgData.length;i++)c.paper.path(c.svgData[i].path).attr(j(c,c.svgData[i]))};null===c.delay?d():setTimeout(d,c.delay)})}};var g=function(a,b){b.startTime=a-b.elapsed_time,requestAnimationFrame(function(a){h(a,b)})},h=function(b,c){null==c.startTime&&(c.startTime=b),c.elapsed_time=b-c.startTime,a.each(c.paths,function(a,b){var d;if(c.drawSequential?(d=c.elapsed_time-b.drawStartTime,0>d&&(d=0)):d=c.elapsed_time,d<b.duration&&d>0){var e;e="string"==typeof b.pathstr?c.paper.path(pathstr).attr({stroke:"none",fill:"none"}):b.pathstr,c.paper.path(b.pathstr).attr(b.attr);var g=e.getTotalLength(e),h=d/b.duration*g,i=e.getSubpath(0,h);c.paper.path(i).attr(b.attr)}}),c.elapsed_time<c.totalDuration?c.rAF=requestAnimationFrame(function(a){h(a,c)}):null!=c.onComplete&&c.onComplete()},j=function(a,b){var c={stroke:b.strokeColor?b.strokeColor:a.strokeColor,"fill-opacity":0,"stroke-dasharray":b.strokeDash?b.strokeDash:a.strokeDash,"stroke-opacity":b.strokeOpacity?b.strokeOpacity:a.strokeOpacity,"stroke-width":b.strokeWidth?b.strokeWidth:a.strokeWidth,"stroke-linecap":b.strokeCap?b.strokeCap:a.strokeCap,"stroke-linejoin":b.strokeJoin?b.strokeJoin:a.strokeJoin};return c},k=function(){for(var a="abcdef0123456789",b=[],c=0;6>c;c++){var d=Math.round(6*Math.random()),e=a.substr(d,1);b.push(e)}return"#"+b.join("")};a.fn.lazylinepainter=function(a){return e.methods[a]?e.methods[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:e.methods.init.apply(this,arguments)}}(jQuery,window);